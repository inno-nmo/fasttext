generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mongodb"
    url      = env("DATABASE_URL")
}

enum Role {
    admin
    user
    manager
    checker
}

model User {
    id             String     @id @default(auto()) @map("_id") @db.ObjectId
    hashedPassword String
    name           String
    user           String     @unique
    tel            String
    role           Role
    sectionId      String     @db.ObjectId
    section        Section    @relation(fields: [sectionId], references: [id])
    Document       Document[]
}

model Section {
    id        String     @id @default(auto()) @map("_id") @db.ObjectId
    shortName String
    name      String
    users     User[]
    document  Document[]
}

model Document {
    id        String   @id @default(auto()) @map("_id") @db.ObjectId
    name      String
    amount    String
    note      String
    userId    String   @db.ObjectId
    user      User     @relation(fields: [userId], references: [id])
    sectionId String   @db.ObjectId
    section   Section  @relation(fields: [sectionId], references: [id])
    status    Status[]
}

model Status {
    id         String   @id @default(auto()) @map("_id") @db.ObjectId
    name       String
    date       DateTime
    document   Document @relation(fields: [documentId], references: [id])
    documentId String   @db.ObjectId
}
